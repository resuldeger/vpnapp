{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"kslwqCIsh6ew+I1KeA1rlVRjsAk=","exportNames":["*"]}},{"name":"zustand","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":33,"index":33}}],"key":"POPvx7yS3Y3wz+S/9OAefiXNs0Q=","exportNames":["*"]}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":34},"end":{"line":2,"column":69,"index":103}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"]}},{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":104},"end":{"line":3,"column":26,"index":130}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"]}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = require(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.useAuthStore = void 0;\n  var _zustand = require(_dependencyMap[1], \"zustand\");\n  var _asyncStorage = _interopRequireDefault(require(_dependencyMap[2], \"@react-native-async-storage/async-storage\"));\n  var _axios = _interopRequireDefault(require(_dependencyMap[3], \"axios\"));\n  const API_BASE_URL = process.env.EXPO_PUBLIC_BACKEND_URL + '/api';\n  const useAuthStore = exports.useAuthStore = (0, _zustand.create)((set, get) => ({\n    user: null,\n    token: null,\n    isAuthenticated: false,\n    isLoading: false,\n    register: async (email, password) => {\n      try {\n        set({\n          isLoading: true\n        });\n        const response = await _axios.default.post(`${API_BASE_URL}/auth/register`, {\n          email,\n          password\n        });\n        const {\n          access_token,\n          user_id,\n          subscription_tier\n        } = response.data;\n\n        // Store token\n        await _asyncStorage.default.setItem('auth_token', access_token);\n\n        // Create user object\n        const user = {\n          id: user_id,\n          email,\n          subscription_tier\n        };\n        set({\n          user,\n          token: access_token,\n          isAuthenticated: true,\n          isLoading: false\n        });\n\n        // Set default axios header\n        _axios.default.defaults.headers.common['Authorization'] = `Bearer ${access_token}`;\n      } catch (error) {\n        set({\n          isLoading: false\n        });\n        throw new Error(error.response?.data?.detail || 'Registration failed');\n      }\n    },\n    login: async (email, password) => {\n      try {\n        set({\n          isLoading: true\n        });\n        const response = await _axios.default.post(`${API_BASE_URL}/auth/login`, {\n          email,\n          password\n        });\n        const {\n          access_token,\n          user_id,\n          subscription_tier\n        } = response.data;\n\n        // Store token\n        await _asyncStorage.default.setItem('auth_token', access_token);\n\n        // Create user object\n        const user = {\n          id: user_id,\n          email,\n          subscription_tier\n        };\n        set({\n          user,\n          token: access_token,\n          isAuthenticated: true,\n          isLoading: false\n        });\n\n        // Set default axios header\n        _axios.default.defaults.headers.common['Authorization'] = `Bearer ${access_token}`;\n      } catch (error) {\n        set({\n          isLoading: false\n        });\n        throw new Error(error.response?.data?.detail || 'Login failed');\n      }\n    },\n    logout: async () => {\n      try {\n        await _asyncStorage.default.removeItem('auth_token');\n        delete _axios.default.defaults.headers.common['Authorization'];\n        set({\n          user: null,\n          token: null,\n          isAuthenticated: false,\n          isLoading: false\n        });\n      } catch (error) {\n        console.error('Logout error:', error);\n      }\n    },\n    loadUser: async () => {\n      try {\n        set({\n          isLoading: true\n        });\n        const token = await _asyncStorage.default.getItem('auth_token');\n        if (!token) {\n          set({\n            isLoading: false\n          });\n          return;\n        }\n\n        // Set axios header\n        _axios.default.defaults.headers.common['Authorization'] = `Bearer ${token}`;\n\n        // Fetch user profile\n        const response = await _axios.default.get(`${API_BASE_URL}/auth/profile`);\n        const userData = response.data;\n        const user = {\n          id: userData.id,\n          email: userData.email,\n          subscription_tier: userData.subscription_tier,\n          subscription_expires_at: userData.subscription_expires_at\n        };\n        set({\n          user,\n          token,\n          isAuthenticated: true,\n          isLoading: false\n        });\n      } catch (error) {\n        // Token is invalid, clear it\n        await _asyncStorage.default.removeItem('auth_token');\n        delete _axios.default.defaults.headers.common['Authorization'];\n        set({\n          user: null,\n          token: null,\n          isAuthenticated: false,\n          isLoading: false\n        });\n      }\n    },\n    refreshProfile: async () => {\n      try {\n        const {\n          token\n        } = get();\n        if (!token) return;\n        const response = await _axios.default.get(`${API_BASE_URL}/auth/profile`);\n        const userData = response.data;\n        const user = {\n          id: userData.id,\n          email: userData.email,\n          subscription_tier: userData.subscription_tier,\n          subscription_expires_at: userData.subscription_expires_at\n        };\n        set({\n          user\n        });\n      } catch (error) {\n        console.error('Failed to refresh profile:', error);\n      }\n    }\n  }));\n});","lineCount":175,"map":[[7,2,1,0],[7,6,1,0,"_zustand"],[7,14,1,0],[7,17,1,0,"require"],[7,24,1,0],[7,25,1,0,"_dependencyMap"],[7,39,1,0],[8,2,2,0],[8,6,2,0,"_asyncStorage"],[8,19,2,0],[8,22,2,0,"_interopRequireDefault"],[8,44,2,0],[8,45,2,0,"require"],[8,52,2,0],[8,53,2,0,"_dependencyMap"],[8,67,2,0],[9,2,3,0],[9,6,3,0,"_axios"],[9,12,3,0],[9,15,3,0,"_interopRequireDefault"],[9,37,3,0],[9,38,3,0,"require"],[9,45,3,0],[9,46,3,0,"_dependencyMap"],[9,60,3,0],[10,2,5,0],[10,8,5,6,"API_BASE_URL"],[10,20,5,18],[10,23,5,21,"process"],[10,30,5,28],[10,31,5,29,"env"],[10,34,5,32],[10,35,5,33,"EXPO_PUBLIC_BACKEND_URL"],[10,58,5,56],[10,61,5,59],[10,67,5,65],[11,2,26,7],[11,8,26,13,"useAuthStore"],[11,20,26,25],[11,23,26,25,"exports"],[11,30,26,25],[11,31,26,25,"useAuthStore"],[11,43,26,25],[11,46,26,28],[11,50,26,28,"create"],[11,65,26,34],[11,67,26,46],[11,68,26,47,"set"],[11,71,26,50],[11,73,26,52,"get"],[11,76,26,55],[11,82,26,61],[12,4,27,2,"user"],[12,8,27,6],[12,10,27,8],[12,14,27,12],[13,4,28,2,"token"],[13,9,28,7],[13,11,28,9],[13,15,28,13],[14,4,29,2,"isAuthenticated"],[14,19,29,17],[14,21,29,19],[14,26,29,24],[15,4,30,2,"isLoading"],[15,13,30,11],[15,15,30,13],[15,20,30,18],[16,4,32,2,"register"],[16,12,32,10],[16,14,32,12],[16,20,32,12,"register"],[16,21,32,19,"email"],[16,26,32,32],[16,28,32,34,"password"],[16,36,32,50],[16,41,32,55],[17,6,33,4],[17,10,33,8],[18,8,34,6,"set"],[18,11,34,9],[18,12,34,10],[19,10,34,12,"isLoading"],[19,19,34,21],[19,21,34,23],[20,8,34,28],[20,9,34,29],[20,10,34,30],[21,8,36,6],[21,14,36,12,"response"],[21,22,36,20],[21,25,36,23],[21,31,36,29,"axios"],[21,45,36,34],[21,46,36,35,"post"],[21,50,36,39],[21,51,36,40],[21,54,36,43,"API_BASE_URL"],[21,66,36,55],[21,82,36,71],[21,84,36,73],[22,10,37,8,"email"],[22,15,37,13],[23,10,38,8,"password"],[24,8,39,6],[24,9,39,7],[24,10,39,8],[25,8,41,6],[25,14,41,12],[26,10,41,14,"access_token"],[26,22,41,26],[27,10,41,28,"user_id"],[27,17,41,35],[28,10,41,37,"subscription_tier"],[29,8,41,55],[29,9,41,56],[29,12,41,59,"response"],[29,20,41,67],[29,21,41,68,"data"],[29,25,41,72],[31,8,43,6],[32,8,44,6],[32,14,44,12,"AsyncStorage"],[32,35,44,24],[32,36,44,25,"setItem"],[32,43,44,32],[32,44,44,33],[32,56,44,45],[32,58,44,47,"access_token"],[32,70,44,59],[32,71,44,60],[34,8,46,6],[35,8,47,6],[35,14,47,12,"user"],[35,18,47,22],[35,21,47,25],[36,10,48,8,"id"],[36,12,48,10],[36,14,48,12,"user_id"],[36,21,48,19],[37,10,49,8,"email"],[37,15,49,13],[38,10,50,8,"subscription_tier"],[39,8,51,6],[39,9,51,7],[40,8,53,6,"set"],[40,11,53,9],[40,12,53,10],[41,10,54,8,"user"],[41,14,54,12],[42,10,55,8,"token"],[42,15,55,13],[42,17,55,15,"access_token"],[42,29,55,27],[43,10,56,8,"isAuthenticated"],[43,25,56,23],[43,27,56,25],[43,31,56,29],[44,10,57,8,"isLoading"],[44,19,57,17],[44,21,57,19],[45,8,58,6],[45,9,58,7],[45,10,58,8],[47,8,60,6],[48,8,61,6,"axios"],[48,22,61,11],[48,23,61,12,"defaults"],[48,31,61,20],[48,32,61,21,"headers"],[48,39,61,28],[48,40,61,29,"common"],[48,46,61,35],[48,47,61,36],[48,62,61,51],[48,63,61,52],[48,66,61,55],[48,76,61,65,"access_token"],[48,88,61,77],[48,90,61,79],[49,6,62,4],[49,7,62,5],[49,8,62,6],[49,15,62,13,"error"],[49,20,62,23],[49,22,62,25],[50,8,63,6,"set"],[50,11,63,9],[50,12,63,10],[51,10,63,12,"isLoading"],[51,19,63,21],[51,21,63,23],[52,8,63,29],[52,9,63,30],[52,10,63,31],[53,8,64,6],[53,14,64,12],[53,18,64,16,"Error"],[53,23,64,21],[53,24,65,8,"error"],[53,29,65,13],[53,30,65,14,"response"],[53,38,65,22],[53,40,65,24,"data"],[53,44,65,28],[53,46,65,30,"detail"],[53,52,65,36],[53,56,65,40],[53,77,66,6],[53,78,66,7],[54,6,67,4],[55,4,68,2],[55,5,68,3],[56,4,70,2,"login"],[56,9,70,7],[56,11,70,9],[56,17,70,9,"login"],[56,18,70,16,"email"],[56,23,70,29],[56,25,70,31,"password"],[56,33,70,47],[56,38,70,52],[57,6,71,4],[57,10,71,8],[58,8,72,6,"set"],[58,11,72,9],[58,12,72,10],[59,10,72,12,"isLoading"],[59,19,72,21],[59,21,72,23],[60,8,72,28],[60,9,72,29],[60,10,72,30],[61,8,74,6],[61,14,74,12,"response"],[61,22,74,20],[61,25,74,23],[61,31,74,29,"axios"],[61,45,74,34],[61,46,74,35,"post"],[61,50,74,39],[61,51,74,40],[61,54,74,43,"API_BASE_URL"],[61,66,74,55],[61,79,74,68],[61,81,74,70],[62,10,75,8,"email"],[62,15,75,13],[63,10,76,8,"password"],[64,8,77,6],[64,9,77,7],[64,10,77,8],[65,8,79,6],[65,14,79,12],[66,10,79,14,"access_token"],[66,22,79,26],[67,10,79,28,"user_id"],[67,17,79,35],[68,10,79,37,"subscription_tier"],[69,8,79,55],[69,9,79,56],[69,12,79,59,"response"],[69,20,79,67],[69,21,79,68,"data"],[69,25,79,72],[71,8,81,6],[72,8,82,6],[72,14,82,12,"AsyncStorage"],[72,35,82,24],[72,36,82,25,"setItem"],[72,43,82,32],[72,44,82,33],[72,56,82,45],[72,58,82,47,"access_token"],[72,70,82,59],[72,71,82,60],[74,8,84,6],[75,8,85,6],[75,14,85,12,"user"],[75,18,85,22],[75,21,85,25],[76,10,86,8,"id"],[76,12,86,10],[76,14,86,12,"user_id"],[76,21,86,19],[77,10,87,8,"email"],[77,15,87,13],[78,10,88,8,"subscription_tier"],[79,8,89,6],[79,9,89,7],[80,8,91,6,"set"],[80,11,91,9],[80,12,91,10],[81,10,92,8,"user"],[81,14,92,12],[82,10,93,8,"token"],[82,15,93,13],[82,17,93,15,"access_token"],[82,29,93,27],[83,10,94,8,"isAuthenticated"],[83,25,94,23],[83,27,94,25],[83,31,94,29],[84,10,95,8,"isLoading"],[84,19,95,17],[84,21,95,19],[85,8,96,6],[85,9,96,7],[85,10,96,8],[87,8,98,6],[88,8,99,6,"axios"],[88,22,99,11],[88,23,99,12,"defaults"],[88,31,99,20],[88,32,99,21,"headers"],[88,39,99,28],[88,40,99,29,"common"],[88,46,99,35],[88,47,99,36],[88,62,99,51],[88,63,99,52],[88,66,99,55],[88,76,99,65,"access_token"],[88,88,99,77],[88,90,99,79],[89,6,100,4],[89,7,100,5],[89,8,100,6],[89,15,100,13,"error"],[89,20,100,23],[89,22,100,25],[90,8,101,6,"set"],[90,11,101,9],[90,12,101,10],[91,10,101,12,"isLoading"],[91,19,101,21],[91,21,101,23],[92,8,101,29],[92,9,101,30],[92,10,101,31],[93,8,102,6],[93,14,102,12],[93,18,102,16,"Error"],[93,23,102,21],[93,24,103,8,"error"],[93,29,103,13],[93,30,103,14,"response"],[93,38,103,22],[93,40,103,24,"data"],[93,44,103,28],[93,46,103,30,"detail"],[93,52,103,36],[93,56,103,40],[93,70,104,6],[93,71,104,7],[94,6,105,4],[95,4,106,2],[95,5,106,3],[96,4,108,2,"logout"],[96,10,108,8],[96,12,108,10],[96,18,108,10,"logout"],[96,19,108,10],[96,24,108,22],[97,6,109,4],[97,10,109,8],[98,8,110,6],[98,14,110,12,"AsyncStorage"],[98,35,110,24],[98,36,110,25,"removeItem"],[98,46,110,35],[98,47,110,36],[98,59,110,48],[98,60,110,49],[99,8,111,6],[99,15,111,13,"axios"],[99,29,111,18],[99,30,111,19,"defaults"],[99,38,111,27],[99,39,111,28,"headers"],[99,46,111,35],[99,47,111,36,"common"],[99,53,111,42],[99,54,111,43],[99,69,111,58],[99,70,111,59],[100,8,113,6,"set"],[100,11,113,9],[100,12,113,10],[101,10,114,8,"user"],[101,14,114,12],[101,16,114,14],[101,20,114,18],[102,10,115,8,"token"],[102,15,115,13],[102,17,115,15],[102,21,115,19],[103,10,116,8,"isAuthenticated"],[103,25,116,23],[103,27,116,25],[103,32,116,30],[104,10,117,8,"isLoading"],[104,19,117,17],[104,21,117,19],[105,8,118,6],[105,9,118,7],[105,10,118,8],[106,6,119,4],[106,7,119,5],[106,8,119,6],[106,15,119,13,"error"],[106,20,119,18],[106,22,119,20],[107,8,120,6,"console"],[107,15,120,13],[107,16,120,14,"error"],[107,21,120,19],[107,22,120,20],[107,37,120,35],[107,39,120,37,"error"],[107,44,120,42],[107,45,120,43],[108,6,121,4],[109,4,122,2],[109,5,122,3],[110,4,124,2,"loadUser"],[110,12,124,10],[110,14,124,12],[110,20,124,12,"loadUser"],[110,21,124,12],[110,26,124,24],[111,6,125,4],[111,10,125,8],[112,8,126,6,"set"],[112,11,126,9],[112,12,126,10],[113,10,126,12,"isLoading"],[113,19,126,21],[113,21,126,23],[114,8,126,28],[114,9,126,29],[114,10,126,30],[115,8,128,6],[115,14,128,12,"token"],[115,19,128,17],[115,22,128,20],[115,28,128,26,"AsyncStorage"],[115,49,128,38],[115,50,128,39,"getItem"],[115,57,128,46],[115,58,128,47],[115,70,128,59],[115,71,128,60],[116,8,129,6],[116,12,129,10],[116,13,129,11,"token"],[116,18,129,16],[116,20,129,18],[117,10,130,8,"set"],[117,13,130,11],[117,14,130,12],[118,12,130,14,"isLoading"],[118,21,130,23],[118,23,130,25],[119,10,130,31],[119,11,130,32],[119,12,130,33],[120,10,131,8],[121,8,132,6],[123,8,134,6],[124,8,135,6,"axios"],[124,22,135,11],[124,23,135,12,"defaults"],[124,31,135,20],[124,32,135,21,"headers"],[124,39,135,28],[124,40,135,29,"common"],[124,46,135,35],[124,47,135,36],[124,62,135,51],[124,63,135,52],[124,66,135,55],[124,76,135,65,"token"],[124,81,135,70],[124,83,135,72],[126,8,137,6],[127,8,138,6],[127,14,138,12,"response"],[127,22,138,20],[127,25,138,23],[127,31,138,29,"axios"],[127,45,138,34],[127,46,138,35,"get"],[127,49,138,38],[127,50,138,39],[127,53,138,42,"API_BASE_URL"],[127,65,138,54],[127,80,138,69],[127,81,138,70],[128,8,139,6],[128,14,139,12,"userData"],[128,22,139,20],[128,25,139,23,"response"],[128,33,139,31],[128,34,139,32,"data"],[128,38,139,36],[129,8,141,6],[129,14,141,12,"user"],[129,18,141,22],[129,21,141,25],[130,10,142,8,"id"],[130,12,142,10],[130,14,142,12,"userData"],[130,22,142,20],[130,23,142,21,"id"],[130,25,142,23],[131,10,143,8,"email"],[131,15,143,13],[131,17,143,15,"userData"],[131,25,143,23],[131,26,143,24,"email"],[131,31,143,29],[132,10,144,8,"subscription_tier"],[132,27,144,25],[132,29,144,27,"userData"],[132,37,144,35],[132,38,144,36,"subscription_tier"],[132,55,144,53],[133,10,145,8,"subscription_expires_at"],[133,33,145,31],[133,35,145,33,"userData"],[133,43,145,41],[133,44,145,42,"subscription_expires_at"],[134,8,146,6],[134,9,146,7],[135,8,148,6,"set"],[135,11,148,9],[135,12,148,10],[136,10,149,8,"user"],[136,14,149,12],[137,10,150,8,"token"],[137,15,150,13],[138,10,151,8,"isAuthenticated"],[138,25,151,23],[138,27,151,25],[138,31,151,29],[139,10,152,8,"isLoading"],[139,19,152,17],[139,21,152,19],[140,8,153,6],[140,9,153,7],[140,10,153,8],[141,6,154,4],[141,7,154,5],[141,8,154,6],[141,15,154,13,"error"],[141,20,154,18],[141,22,154,20],[142,8,155,6],[143,8,156,6],[143,14,156,12,"AsyncStorage"],[143,35,156,24],[143,36,156,25,"removeItem"],[143,46,156,35],[143,47,156,36],[143,59,156,48],[143,60,156,49],[144,8,157,6],[144,15,157,13,"axios"],[144,29,157,18],[144,30,157,19,"defaults"],[144,38,157,27],[144,39,157,28,"headers"],[144,46,157,35],[144,47,157,36,"common"],[144,53,157,42],[144,54,157,43],[144,69,157,58],[144,70,157,59],[145,8,159,6,"set"],[145,11,159,9],[145,12,159,10],[146,10,160,8,"user"],[146,14,160,12],[146,16,160,14],[146,20,160,18],[147,10,161,8,"token"],[147,15,161,13],[147,17,161,15],[147,21,161,19],[148,10,162,8,"isAuthenticated"],[148,25,162,23],[148,27,162,25],[148,32,162,30],[149,10,163,8,"isLoading"],[149,19,163,17],[149,21,163,19],[150,8,164,6],[150,9,164,7],[150,10,164,8],[151,6,165,4],[152,4,166,2],[152,5,166,3],[153,4,168,2,"refreshProfile"],[153,18,168,16],[153,20,168,18],[153,26,168,18,"refreshProfile"],[153,27,168,18],[153,32,168,30],[154,6,169,4],[154,10,169,8],[155,8,170,6],[155,14,170,12],[156,10,170,14,"token"],[157,8,170,20],[157,9,170,21],[157,12,170,24,"get"],[157,15,170,27],[157,16,170,28],[157,17,170,29],[158,8,171,6],[158,12,171,10],[158,13,171,11,"token"],[158,18,171,16],[158,20,171,18],[159,8,173,6],[159,14,173,12,"response"],[159,22,173,20],[159,25,173,23],[159,31,173,29,"axios"],[159,45,173,34],[159,46,173,35,"get"],[159,49,173,38],[159,50,173,39],[159,53,173,42,"API_BASE_URL"],[159,65,173,54],[159,80,173,69],[159,81,173,70],[160,8,174,6],[160,14,174,12,"userData"],[160,22,174,20],[160,25,174,23,"response"],[160,33,174,31],[160,34,174,32,"data"],[160,38,174,36],[161,8,176,6],[161,14,176,12,"user"],[161,18,176,22],[161,21,176,25],[162,10,177,8,"id"],[162,12,177,10],[162,14,177,12,"userData"],[162,22,177,20],[162,23,177,21,"id"],[162,25,177,23],[163,10,178,8,"email"],[163,15,178,13],[163,17,178,15,"userData"],[163,25,178,23],[163,26,178,24,"email"],[163,31,178,29],[164,10,179,8,"subscription_tier"],[164,27,179,25],[164,29,179,27,"userData"],[164,37,179,35],[164,38,179,36,"subscription_tier"],[164,55,179,53],[165,10,180,8,"subscription_expires_at"],[165,33,180,31],[165,35,180,33,"userData"],[165,43,180,41],[165,44,180,42,"subscription_expires_at"],[166,8,181,6],[166,9,181,7],[167,8,183,6,"set"],[167,11,183,9],[167,12,183,10],[168,10,183,12,"user"],[169,8,183,17],[169,9,183,18],[169,10,183,19],[170,6,184,4],[170,7,184,5],[170,8,184,6],[170,15,184,13,"error"],[170,20,184,18],[170,22,184,20],[171,8,185,6,"console"],[171,15,185,13],[171,16,185,14,"error"],[171,21,185,19],[171,22,185,20],[171,50,185,48],[171,52,185,50,"error"],[171,57,185,55],[171,58,185,56],[172,6,186,4],[173,4,187,2],[174,2,188,0],[174,3,188,1],[174,4,188,2],[174,5,188,3],[175,0,188,4],[175,3]],"functionMap":{"names":["<global>","create$argument_0","register","login","logout","loadUser","refreshProfile"],"mappings":"AAA;8CCyB;YCM;GDoC;SEE;GFoC;UGE;GHc;YIE;GJ0C;kBKE;GLmB;EDC"}},"type":"js/module"}]}