{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"kslwqCIsh6ew+I1KeA1rlVRjsAk=","exportNames":["*"]}},{"name":"./speedometer.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":43,"index":43}}],"key":"JWtN7GrWQfwHXgytHZkCYHur2j4=","exportNames":["*"]}},{"name":"./throttle.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":44},"end":{"line":2,"column":37,"index":81}}],"key":"BcsE82O2TtijQ3mU6T8j9Q2jtpw=","exportNames":["*"]}},{"name":"../utils.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":82},"end":{"line":3,"column":32,"index":114}}],"key":"dGswK136diHRCgUa8xpQUn/UMbc=","exportNames":["*"]}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = require(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.progressEventReducer = exports.progressEventDecorator = exports.asyncDecorator = void 0;\n  var _speedometer2 = _interopRequireDefault(require(_dependencyMap[1], \"./speedometer.js\"));\n  var _throttle = _interopRequireDefault(require(_dependencyMap[2], \"./throttle.js\"));\n  var _utils = _interopRequireDefault(require(_dependencyMap[3], \"../utils.js\"));\n  const progressEventReducer = (listener, isDownloadStream, freq = 3) => {\n    let bytesNotified = 0;\n    const _speedometer = (0, _speedometer2.default)(50, 250);\n    return (0, _throttle.default)(e => {\n      const loaded = e.loaded;\n      const total = e.lengthComputable ? e.total : undefined;\n      const progressBytes = loaded - bytesNotified;\n      const rate = _speedometer(progressBytes);\n      const inRange = loaded <= total;\n      bytesNotified = loaded;\n      const data = {\n        loaded,\n        total,\n        progress: total ? loaded / total : undefined,\n        bytes: progressBytes,\n        rate: rate ? rate : undefined,\n        estimated: rate && total && inRange ? (total - loaded) / rate : undefined,\n        event: e,\n        lengthComputable: total != null,\n        [isDownloadStream ? 'download' : 'upload']: true\n      };\n      listener(data);\n    }, freq);\n  };\n  exports.progressEventReducer = progressEventReducer;\n  const progressEventDecorator = (total, throttled) => {\n    const lengthComputable = total != null;\n    return [loaded => throttled[0]({\n      lengthComputable,\n      total,\n      loaded\n    }), throttled[1]];\n  };\n  exports.progressEventDecorator = progressEventDecorator;\n  const asyncDecorator = fn => (...args) => _utils.default.asap(() => fn(...args));\n  exports.asyncDecorator = asyncDecorator;\n});","lineCount":46,"map":[[7,2,1,0],[7,6,1,0,"_speedometer2"],[7,19,1,0],[7,22,1,0,"_interopRequireDefault"],[7,44,1,0],[7,45,1,0,"require"],[7,52,1,0],[7,53,1,0,"_dependencyMap"],[7,67,1,0],[8,2,2,0],[8,6,2,0,"_throttle"],[8,15,2,0],[8,18,2,0,"_interopRequireDefault"],[8,40,2,0],[8,41,2,0,"require"],[8,48,2,0],[8,49,2,0,"_dependencyMap"],[8,63,2,0],[9,2,3,0],[9,6,3,0,"_utils"],[9,12,3,0],[9,15,3,0,"_interopRequireDefault"],[9,37,3,0],[9,38,3,0,"require"],[9,45,3,0],[9,46,3,0,"_dependencyMap"],[9,60,3,0],[10,2,5,7],[10,8,5,13,"progressEventReducer"],[10,28,5,33],[10,31,5,36,"progressEventReducer"],[10,32,5,37,"listener"],[10,40,5,45],[10,42,5,47,"isDownloadStream"],[10,58,5,63],[10,60,5,65,"freq"],[10,64,5,69],[10,67,5,72],[10,68,5,73],[10,73,5,78],[11,4,6,2],[11,8,6,6,"bytesNotified"],[11,21,6,19],[11,24,6,22],[11,25,6,23],[12,4,7,2],[12,10,7,8,"_speedometer"],[12,22,7,20],[12,25,7,23],[12,29,7,23,"speedometer"],[12,50,7,34],[12,52,7,35],[12,54,7,37],[12,56,7,39],[12,59,7,42],[12,60,7,43],[13,4,9,2],[13,11,9,9],[13,15,9,9,"throttle"],[13,32,9,17],[13,34,9,18,"e"],[13,35,9,19],[13,39,9,23],[14,6,10,4],[14,12,10,10,"loaded"],[14,18,10,16],[14,21,10,19,"e"],[14,22,10,20],[14,23,10,21,"loaded"],[14,29,10,27],[15,6,11,4],[15,12,11,10,"total"],[15,17,11,15],[15,20,11,18,"e"],[15,21,11,19],[15,22,11,20,"lengthComputable"],[15,38,11,36],[15,41,11,39,"e"],[15,42,11,40],[15,43,11,41,"total"],[15,48,11,46],[15,51,11,49,"undefined"],[15,60,11,58],[16,6,12,4],[16,12,12,10,"progressBytes"],[16,25,12,23],[16,28,12,26,"loaded"],[16,34,12,32],[16,37,12,35,"bytesNotified"],[16,50,12,48],[17,6,13,4],[17,12,13,10,"rate"],[17,16,13,14],[17,19,13,17,"_speedometer"],[17,31,13,29],[17,32,13,30,"progressBytes"],[17,45,13,43],[17,46,13,44],[18,6,14,4],[18,12,14,10,"inRange"],[18,19,14,17],[18,22,14,20,"loaded"],[18,28,14,26],[18,32,14,30,"total"],[18,37,14,35],[19,6,16,4,"bytesNotified"],[19,19,16,17],[19,22,16,20,"loaded"],[19,28,16,26],[20,6,18,4],[20,12,18,10,"data"],[20,16,18,14],[20,19,18,17],[21,8,19,6,"loaded"],[21,14,19,12],[22,8,20,6,"total"],[22,13,20,11],[23,8,21,6,"progress"],[23,16,21,14],[23,18,21,16,"total"],[23,23,21,21],[23,26,21,25,"loaded"],[23,32,21,31],[23,35,21,34,"total"],[23,40,21,39],[23,43,21,43,"undefined"],[23,52,21,52],[24,8,22,6,"bytes"],[24,13,22,11],[24,15,22,13,"progressBytes"],[24,28,22,26],[25,8,23,6,"rate"],[25,12,23,10],[25,14,23,12,"rate"],[25,18,23,16],[25,21,23,19,"rate"],[25,25,23,23],[25,28,23,26,"undefined"],[25,37,23,35],[26,8,24,6,"estimated"],[26,17,24,15],[26,19,24,17,"rate"],[26,23,24,21],[26,27,24,25,"total"],[26,32,24,30],[26,36,24,34,"inRange"],[26,43,24,41],[26,46,24,44],[26,47,24,45,"total"],[26,52,24,50],[26,55,24,53,"loaded"],[26,61,24,59],[26,65,24,63,"rate"],[26,69,24,67],[26,72,24,70,"undefined"],[26,81,24,79],[27,8,25,6,"event"],[27,13,25,11],[27,15,25,13,"e"],[27,16,25,14],[28,8,26,6,"lengthComputable"],[28,24,26,22],[28,26,26,24,"total"],[28,31,26,29],[28,35,26,33],[28,39,26,37],[29,8,27,6],[29,9,27,7,"isDownloadStream"],[29,25,27,23],[29,28,27,26],[29,38,27,36],[29,41,27,39],[29,49,27,47],[29,52,27,50],[30,6,28,4],[30,7,28,5],[31,6,30,4,"listener"],[31,14,30,12],[31,15,30,13,"data"],[31,19,30,17],[31,20,30,18],[32,4,31,2],[32,5,31,3],[32,7,31,5,"freq"],[32,11,31,9],[32,12,31,10],[33,2,32,0],[33,3,32,1],[34,2,32,1,"exports"],[34,9,32,1],[34,10,32,1,"progressEventReducer"],[34,30,32,1],[34,33,32,1,"progressEventReducer"],[34,53,32,1],[35,2,34,7],[35,8,34,13,"progressEventDecorator"],[35,30,34,35],[35,33,34,38,"progressEventDecorator"],[35,34,34,39,"total"],[35,39,34,44],[35,41,34,46,"throttled"],[35,50,34,55],[35,55,34,60],[36,4,35,2],[36,10,35,8,"lengthComputable"],[36,26,35,24],[36,29,35,27,"total"],[36,34,35,32],[36,38,35,36],[36,42,35,40],[37,4,37,2],[37,11,37,9],[37,12,37,11,"loaded"],[37,18,37,17],[37,22,37,22,"throttled"],[37,31,37,31],[37,32,37,32],[37,33,37,33],[37,34,37,34],[37,35,37,35],[38,6,38,4,"lengthComputable"],[38,22,38,20],[39,6,39,4,"total"],[39,11,39,9],[40,6,40,4,"loaded"],[41,4,41,2],[41,5,41,3],[41,6,41,4],[41,8,41,6,"throttled"],[41,17,41,15],[41,18,41,16],[41,19,41,17],[41,20,41,18],[41,21,41,19],[42,2,42,0],[42,3,42,1],[43,2,42,1,"exports"],[43,9,42,1],[43,10,42,1,"progressEventDecorator"],[43,32,42,1],[43,35,42,1,"progressEventDecorator"],[43,57,42,1],[44,2,44,7],[44,8,44,13,"asyncDecorator"],[44,22,44,27],[44,25,44,31,"fn"],[44,27,44,33],[44,31,44,38],[44,32,44,39],[44,35,44,42,"args"],[44,39,44,46],[44,44,44,51,"utils"],[44,58,44,56],[44,59,44,57,"asap"],[44,63,44,61],[44,64,44,62],[44,70,44,68,"fn"],[44,72,44,70],[44,73,44,71],[44,76,44,74,"args"],[44,80,44,78],[44,81,44,79],[44,82,44,80],[45,2,44,81,"exports"],[45,9,44,81],[45,10,44,81,"asyncDecorator"],[45,24,44,81],[45,27,44,81,"asyncDecorator"],[45,41,44,81],[46,0,44,81],[46,3]],"functionMap":{"names":["<global>","progressEventReducer","throttle$argument_0","progressEventDecorator","<anonymous>","asyncDecorator","utils.asap$argument_0"],"mappings":"AAA;oCCI;kBCI;GDsB;CDC;sCGE;UCG;IDI;CHC;8BKE,QD,wBE,iBF,CJ"}},"type":"js/module"}]}