{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"kslwqCIsh6ew+I1KeA1rlVRjsAk=","exportNames":["*"]}},{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"]}},{"name":"zustand","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":33,"index":33}}],"key":"POPvx7yS3Y3wz+S/9OAefiXNs0Q=","exportNames":["*"]}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":34},"end":{"line":2,"column":69,"index":103}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"]}},{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":104},"end":{"line":3,"column":26,"index":130}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"]}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = require(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.useAuthStore = void 0;\n  var _env2 = require(_dependencyMap[1], \"expo/virtual/env\");\n  var _zustand = require(_dependencyMap[2], \"zustand\");\n  var _asyncStorage = _interopRequireDefault(require(_dependencyMap[3], \"@react-native-async-storage/async-storage\"));\n  var _axios = _interopRequireDefault(require(_dependencyMap[4], \"axios\"));\n  const API_BASE_URL = _env2.env.EXPO_PUBLIC_BACKEND_URL + '/api';\n  const useAuthStore = exports.useAuthStore = (0, _zustand.create)((set, get) => ({\n    user: null,\n    token: null,\n    isAuthenticated: false,\n    isLoading: false,\n    register: async (email, password) => {\n      try {\n        set({\n          isLoading: true\n        });\n        const response = await _axios.default.post(`${API_BASE_URL}/auth/register`, {\n          email,\n          password\n        });\n        const {\n          access_token,\n          user_id,\n          subscription_tier\n        } = response.data;\n\n        // Store token\n        await _asyncStorage.default.setItem('auth_token', access_token);\n\n        // Create user object\n        const user = {\n          id: user_id,\n          email,\n          subscription_tier\n        };\n        set({\n          user,\n          token: access_token,\n          isAuthenticated: true,\n          isLoading: false\n        });\n\n        // Set default axios header\n        _axios.default.defaults.headers.common['Authorization'] = `Bearer ${access_token}`;\n      } catch (error) {\n        set({\n          isLoading: false\n        });\n        throw new Error(error.response?.data?.detail || 'Registration failed');\n      }\n    },\n    login: async (email, password) => {\n      try {\n        set({\n          isLoading: true\n        });\n        const response = await _axios.default.post(`${API_BASE_URL}/auth/login`, {\n          email,\n          password\n        });\n        const {\n          access_token,\n          user_id,\n          subscription_tier\n        } = response.data;\n\n        // Store token\n        await _asyncStorage.default.setItem('auth_token', access_token);\n\n        // Create user object\n        const user = {\n          id: user_id,\n          email,\n          subscription_tier\n        };\n        set({\n          user,\n          token: access_token,\n          isAuthenticated: true,\n          isLoading: false\n        });\n\n        // Set default axios header\n        _axios.default.defaults.headers.common['Authorization'] = `Bearer ${access_token}`;\n      } catch (error) {\n        set({\n          isLoading: false\n        });\n        throw new Error(error.response?.data?.detail || 'Login failed');\n      }\n    },\n    logout: async () => {\n      try {\n        await _asyncStorage.default.removeItem('auth_token');\n        delete _axios.default.defaults.headers.common['Authorization'];\n        set({\n          user: null,\n          token: null,\n          isAuthenticated: false,\n          isLoading: false\n        });\n      } catch (error) {\n        console.error('Logout error:', error);\n      }\n    },\n    loadUser: async () => {\n      try {\n        set({\n          isLoading: true\n        });\n        const token = await _asyncStorage.default.getItem('auth_token');\n        if (!token) {\n          set({\n            isLoading: false\n          });\n          return;\n        }\n\n        // Set axios header\n        _axios.default.defaults.headers.common['Authorization'] = `Bearer ${token}`;\n\n        // Fetch user profile\n        const response = await _axios.default.get(`${API_BASE_URL}/auth/profile`);\n        const userData = response.data;\n        const user = {\n          id: userData.id,\n          email: userData.email,\n          subscription_tier: userData.subscription_tier,\n          subscription_expires_at: userData.subscription_expires_at\n        };\n        set({\n          user,\n          token,\n          isAuthenticated: true,\n          isLoading: false\n        });\n      } catch (error) {\n        // Token is invalid, clear it\n        await _asyncStorage.default.removeItem('auth_token');\n        delete _axios.default.defaults.headers.common['Authorization'];\n        set({\n          user: null,\n          token: null,\n          isAuthenticated: false,\n          isLoading: false\n        });\n      }\n    },\n    refreshProfile: async () => {\n      try {\n        const {\n          token\n        } = get();\n        if (!token) return;\n        const response = await _axios.default.get(`${API_BASE_URL}/auth/profile`);\n        const userData = response.data;\n        const user = {\n          id: userData.id,\n          email: userData.email,\n          subscription_tier: userData.subscription_tier,\n          subscription_expires_at: userData.subscription_expires_at\n        };\n        set({\n          user\n        });\n      } catch (error) {\n        console.error('Failed to refresh profile:', error);\n      }\n    }\n  }));\n});","lineCount":176,"map":[[8,2,1,0],[8,6,1,0,"_zustand"],[8,14,1,0],[8,17,1,0,"require"],[8,24,1,0],[8,25,1,0,"_dependencyMap"],[8,39,1,0],[9,2,2,0],[9,6,2,0,"_asyncStorage"],[9,19,2,0],[9,22,2,0,"_interopRequireDefault"],[9,44,2,0],[9,45,2,0,"require"],[9,52,2,0],[9,53,2,0,"_dependencyMap"],[9,67,2,0],[10,2,3,0],[10,6,3,0,"_axios"],[10,12,3,0],[10,15,3,0,"_interopRequireDefault"],[10,37,3,0],[10,38,3,0,"require"],[10,45,3,0],[10,46,3,0,"_dependencyMap"],[10,60,3,0],[11,2,5,0],[11,8,5,6,"API_BASE_URL"],[11,20,5,18],[11,23,5,21,"_env2"],[11,28,5,21],[11,29,5,21,"env"],[11,32,5,21],[11,33,5,21,"EXPO_PUBLIC_BACKEND_URL"],[11,56,5,21],[11,59,5,59],[11,65,5,65],[12,2,26,7],[12,8,26,13,"useAuthStore"],[12,20,26,25],[12,23,26,25,"exports"],[12,30,26,25],[12,31,26,25,"useAuthStore"],[12,43,26,25],[12,46,26,28],[12,50,26,28,"create"],[12,65,26,34],[12,67,26,46],[12,68,26,47,"set"],[12,71,26,50],[12,73,26,52,"get"],[12,76,26,55],[12,82,26,61],[13,4,27,2,"user"],[13,8,27,6],[13,10,27,8],[13,14,27,12],[14,4,28,2,"token"],[14,9,28,7],[14,11,28,9],[14,15,28,13],[15,4,29,2,"isAuthenticated"],[15,19,29,17],[15,21,29,19],[15,26,29,24],[16,4,30,2,"isLoading"],[16,13,30,11],[16,15,30,13],[16,20,30,18],[17,4,32,2,"register"],[17,12,32,10],[17,14,32,12],[17,20,32,12,"register"],[17,21,32,19,"email"],[17,26,32,32],[17,28,32,34,"password"],[17,36,32,50],[17,41,32,55],[18,6,33,4],[18,10,33,8],[19,8,34,6,"set"],[19,11,34,9],[19,12,34,10],[20,10,34,12,"isLoading"],[20,19,34,21],[20,21,34,23],[21,8,34,28],[21,9,34,29],[21,10,34,30],[22,8,36,6],[22,14,36,12,"response"],[22,22,36,20],[22,25,36,23],[22,31,36,29,"axios"],[22,45,36,34],[22,46,36,35,"post"],[22,50,36,39],[22,51,36,40],[22,54,36,43,"API_BASE_URL"],[22,66,36,55],[22,82,36,71],[22,84,36,73],[23,10,37,8,"email"],[23,15,37,13],[24,10,38,8,"password"],[25,8,39,6],[25,9,39,7],[25,10,39,8],[26,8,41,6],[26,14,41,12],[27,10,41,14,"access_token"],[27,22,41,26],[28,10,41,28,"user_id"],[28,17,41,35],[29,10,41,37,"subscription_tier"],[30,8,41,55],[30,9,41,56],[30,12,41,59,"response"],[30,20,41,67],[30,21,41,68,"data"],[30,25,41,72],[32,8,43,6],[33,8,44,6],[33,14,44,12,"AsyncStorage"],[33,35,44,24],[33,36,44,25,"setItem"],[33,43,44,32],[33,44,44,33],[33,56,44,45],[33,58,44,47,"access_token"],[33,70,44,59],[33,71,44,60],[35,8,46,6],[36,8,47,6],[36,14,47,12,"user"],[36,18,47,22],[36,21,47,25],[37,10,48,8,"id"],[37,12,48,10],[37,14,48,12,"user_id"],[37,21,48,19],[38,10,49,8,"email"],[38,15,49,13],[39,10,50,8,"subscription_tier"],[40,8,51,6],[40,9,51,7],[41,8,53,6,"set"],[41,11,53,9],[41,12,53,10],[42,10,54,8,"user"],[42,14,54,12],[43,10,55,8,"token"],[43,15,55,13],[43,17,55,15,"access_token"],[43,29,55,27],[44,10,56,8,"isAuthenticated"],[44,25,56,23],[44,27,56,25],[44,31,56,29],[45,10,57,8,"isLoading"],[45,19,57,17],[45,21,57,19],[46,8,58,6],[46,9,58,7],[46,10,58,8],[48,8,60,6],[49,8,61,6,"axios"],[49,22,61,11],[49,23,61,12,"defaults"],[49,31,61,20],[49,32,61,21,"headers"],[49,39,61,28],[49,40,61,29,"common"],[49,46,61,35],[49,47,61,36],[49,62,61,51],[49,63,61,52],[49,66,61,55],[49,76,61,65,"access_token"],[49,88,61,77],[49,90,61,79],[50,6,62,4],[50,7,62,5],[50,8,62,6],[50,15,62,13,"error"],[50,20,62,23],[50,22,62,25],[51,8,63,6,"set"],[51,11,63,9],[51,12,63,10],[52,10,63,12,"isLoading"],[52,19,63,21],[52,21,63,23],[53,8,63,29],[53,9,63,30],[53,10,63,31],[54,8,64,6],[54,14,64,12],[54,18,64,16,"Error"],[54,23,64,21],[54,24,65,8,"error"],[54,29,65,13],[54,30,65,14,"response"],[54,38,65,22],[54,40,65,24,"data"],[54,44,65,28],[54,46,65,30,"detail"],[54,52,65,36],[54,56,65,40],[54,77,66,6],[54,78,66,7],[55,6,67,4],[56,4,68,2],[56,5,68,3],[57,4,70,2,"login"],[57,9,70,7],[57,11,70,9],[57,17,70,9,"login"],[57,18,70,16,"email"],[57,23,70,29],[57,25,70,31,"password"],[57,33,70,47],[57,38,70,52],[58,6,71,4],[58,10,71,8],[59,8,72,6,"set"],[59,11,72,9],[59,12,72,10],[60,10,72,12,"isLoading"],[60,19,72,21],[60,21,72,23],[61,8,72,28],[61,9,72,29],[61,10,72,30],[62,8,74,6],[62,14,74,12,"response"],[62,22,74,20],[62,25,74,23],[62,31,74,29,"axios"],[62,45,74,34],[62,46,74,35,"post"],[62,50,74,39],[62,51,74,40],[62,54,74,43,"API_BASE_URL"],[62,66,74,55],[62,79,74,68],[62,81,74,70],[63,10,75,8,"email"],[63,15,75,13],[64,10,76,8,"password"],[65,8,77,6],[65,9,77,7],[65,10,77,8],[66,8,79,6],[66,14,79,12],[67,10,79,14,"access_token"],[67,22,79,26],[68,10,79,28,"user_id"],[68,17,79,35],[69,10,79,37,"subscription_tier"],[70,8,79,55],[70,9,79,56],[70,12,79,59,"response"],[70,20,79,67],[70,21,79,68,"data"],[70,25,79,72],[72,8,81,6],[73,8,82,6],[73,14,82,12,"AsyncStorage"],[73,35,82,24],[73,36,82,25,"setItem"],[73,43,82,32],[73,44,82,33],[73,56,82,45],[73,58,82,47,"access_token"],[73,70,82,59],[73,71,82,60],[75,8,84,6],[76,8,85,6],[76,14,85,12,"user"],[76,18,85,22],[76,21,85,25],[77,10,86,8,"id"],[77,12,86,10],[77,14,86,12,"user_id"],[77,21,86,19],[78,10,87,8,"email"],[78,15,87,13],[79,10,88,8,"subscription_tier"],[80,8,89,6],[80,9,89,7],[81,8,91,6,"set"],[81,11,91,9],[81,12,91,10],[82,10,92,8,"user"],[82,14,92,12],[83,10,93,8,"token"],[83,15,93,13],[83,17,93,15,"access_token"],[83,29,93,27],[84,10,94,8,"isAuthenticated"],[84,25,94,23],[84,27,94,25],[84,31,94,29],[85,10,95,8,"isLoading"],[85,19,95,17],[85,21,95,19],[86,8,96,6],[86,9,96,7],[86,10,96,8],[88,8,98,6],[89,8,99,6,"axios"],[89,22,99,11],[89,23,99,12,"defaults"],[89,31,99,20],[89,32,99,21,"headers"],[89,39,99,28],[89,40,99,29,"common"],[89,46,99,35],[89,47,99,36],[89,62,99,51],[89,63,99,52],[89,66,99,55],[89,76,99,65,"access_token"],[89,88,99,77],[89,90,99,79],[90,6,100,4],[90,7,100,5],[90,8,100,6],[90,15,100,13,"error"],[90,20,100,23],[90,22,100,25],[91,8,101,6,"set"],[91,11,101,9],[91,12,101,10],[92,10,101,12,"isLoading"],[92,19,101,21],[92,21,101,23],[93,8,101,29],[93,9,101,30],[93,10,101,31],[94,8,102,6],[94,14,102,12],[94,18,102,16,"Error"],[94,23,102,21],[94,24,103,8,"error"],[94,29,103,13],[94,30,103,14,"response"],[94,38,103,22],[94,40,103,24,"data"],[94,44,103,28],[94,46,103,30,"detail"],[94,52,103,36],[94,56,103,40],[94,70,104,6],[94,71,104,7],[95,6,105,4],[96,4,106,2],[96,5,106,3],[97,4,108,2,"logout"],[97,10,108,8],[97,12,108,10],[97,18,108,10,"logout"],[97,19,108,10],[97,24,108,22],[98,6,109,4],[98,10,109,8],[99,8,110,6],[99,14,110,12,"AsyncStorage"],[99,35,110,24],[99,36,110,25,"removeItem"],[99,46,110,35],[99,47,110,36],[99,59,110,48],[99,60,110,49],[100,8,111,6],[100,15,111,13,"axios"],[100,29,111,18],[100,30,111,19,"defaults"],[100,38,111,27],[100,39,111,28,"headers"],[100,46,111,35],[100,47,111,36,"common"],[100,53,111,42],[100,54,111,43],[100,69,111,58],[100,70,111,59],[101,8,113,6,"set"],[101,11,113,9],[101,12,113,10],[102,10,114,8,"user"],[102,14,114,12],[102,16,114,14],[102,20,114,18],[103,10,115,8,"token"],[103,15,115,13],[103,17,115,15],[103,21,115,19],[104,10,116,8,"isAuthenticated"],[104,25,116,23],[104,27,116,25],[104,32,116,30],[105,10,117,8,"isLoading"],[105,19,117,17],[105,21,117,19],[106,8,118,6],[106,9,118,7],[106,10,118,8],[107,6,119,4],[107,7,119,5],[107,8,119,6],[107,15,119,13,"error"],[107,20,119,18],[107,22,119,20],[108,8,120,6,"console"],[108,15,120,13],[108,16,120,14,"error"],[108,21,120,19],[108,22,120,20],[108,37,120,35],[108,39,120,37,"error"],[108,44,120,42],[108,45,120,43],[109,6,121,4],[110,4,122,2],[110,5,122,3],[111,4,124,2,"loadUser"],[111,12,124,10],[111,14,124,12],[111,20,124,12,"loadUser"],[111,21,124,12],[111,26,124,24],[112,6,125,4],[112,10,125,8],[113,8,126,6,"set"],[113,11,126,9],[113,12,126,10],[114,10,126,12,"isLoading"],[114,19,126,21],[114,21,126,23],[115,8,126,28],[115,9,126,29],[115,10,126,30],[116,8,128,6],[116,14,128,12,"token"],[116,19,128,17],[116,22,128,20],[116,28,128,26,"AsyncStorage"],[116,49,128,38],[116,50,128,39,"getItem"],[116,57,128,46],[116,58,128,47],[116,70,128,59],[116,71,128,60],[117,8,129,6],[117,12,129,10],[117,13,129,11,"token"],[117,18,129,16],[117,20,129,18],[118,10,130,8,"set"],[118,13,130,11],[118,14,130,12],[119,12,130,14,"isLoading"],[119,21,130,23],[119,23,130,25],[120,10,130,31],[120,11,130,32],[120,12,130,33],[121,10,131,8],[122,8,132,6],[124,8,134,6],[125,8,135,6,"axios"],[125,22,135,11],[125,23,135,12,"defaults"],[125,31,135,20],[125,32,135,21,"headers"],[125,39,135,28],[125,40,135,29,"common"],[125,46,135,35],[125,47,135,36],[125,62,135,51],[125,63,135,52],[125,66,135,55],[125,76,135,65,"token"],[125,81,135,70],[125,83,135,72],[127,8,137,6],[128,8,138,6],[128,14,138,12,"response"],[128,22,138,20],[128,25,138,23],[128,31,138,29,"axios"],[128,45,138,34],[128,46,138,35,"get"],[128,49,138,38],[128,50,138,39],[128,53,138,42,"API_BASE_URL"],[128,65,138,54],[128,80,138,69],[128,81,138,70],[129,8,139,6],[129,14,139,12,"userData"],[129,22,139,20],[129,25,139,23,"response"],[129,33,139,31],[129,34,139,32,"data"],[129,38,139,36],[130,8,141,6],[130,14,141,12,"user"],[130,18,141,22],[130,21,141,25],[131,10,142,8,"id"],[131,12,142,10],[131,14,142,12,"userData"],[131,22,142,20],[131,23,142,21,"id"],[131,25,142,23],[132,10,143,8,"email"],[132,15,143,13],[132,17,143,15,"userData"],[132,25,143,23],[132,26,143,24,"email"],[132,31,143,29],[133,10,144,8,"subscription_tier"],[133,27,144,25],[133,29,144,27,"userData"],[133,37,144,35],[133,38,144,36,"subscription_tier"],[133,55,144,53],[134,10,145,8,"subscription_expires_at"],[134,33,145,31],[134,35,145,33,"userData"],[134,43,145,41],[134,44,145,42,"subscription_expires_at"],[135,8,146,6],[135,9,146,7],[136,8,148,6,"set"],[136,11,148,9],[136,12,148,10],[137,10,149,8,"user"],[137,14,149,12],[138,10,150,8,"token"],[138,15,150,13],[139,10,151,8,"isAuthenticated"],[139,25,151,23],[139,27,151,25],[139,31,151,29],[140,10,152,8,"isLoading"],[140,19,152,17],[140,21,152,19],[141,8,153,6],[141,9,153,7],[141,10,153,8],[142,6,154,4],[142,7,154,5],[142,8,154,6],[142,15,154,13,"error"],[142,20,154,18],[142,22,154,20],[143,8,155,6],[144,8,156,6],[144,14,156,12,"AsyncStorage"],[144,35,156,24],[144,36,156,25,"removeItem"],[144,46,156,35],[144,47,156,36],[144,59,156,48],[144,60,156,49],[145,8,157,6],[145,15,157,13,"axios"],[145,29,157,18],[145,30,157,19,"defaults"],[145,38,157,27],[145,39,157,28,"headers"],[145,46,157,35],[145,47,157,36,"common"],[145,53,157,42],[145,54,157,43],[145,69,157,58],[145,70,157,59],[146,8,159,6,"set"],[146,11,159,9],[146,12,159,10],[147,10,160,8,"user"],[147,14,160,12],[147,16,160,14],[147,20,160,18],[148,10,161,8,"token"],[148,15,161,13],[148,17,161,15],[148,21,161,19],[149,10,162,8,"isAuthenticated"],[149,25,162,23],[149,27,162,25],[149,32,162,30],[150,10,163,8,"isLoading"],[150,19,163,17],[150,21,163,19],[151,8,164,6],[151,9,164,7],[151,10,164,8],[152,6,165,4],[153,4,166,2],[153,5,166,3],[154,4,168,2,"refreshProfile"],[154,18,168,16],[154,20,168,18],[154,26,168,18,"refreshProfile"],[154,27,168,18],[154,32,168,30],[155,6,169,4],[155,10,169,8],[156,8,170,6],[156,14,170,12],[157,10,170,14,"token"],[158,8,170,20],[158,9,170,21],[158,12,170,24,"get"],[158,15,170,27],[158,16,170,28],[158,17,170,29],[159,8,171,6],[159,12,171,10],[159,13,171,11,"token"],[159,18,171,16],[159,20,171,18],[160,8,173,6],[160,14,173,12,"response"],[160,22,173,20],[160,25,173,23],[160,31,173,29,"axios"],[160,45,173,34],[160,46,173,35,"get"],[160,49,173,38],[160,50,173,39],[160,53,173,42,"API_BASE_URL"],[160,65,173,54],[160,80,173,69],[160,81,173,70],[161,8,174,6],[161,14,174,12,"userData"],[161,22,174,20],[161,25,174,23,"response"],[161,33,174,31],[161,34,174,32,"data"],[161,38,174,36],[162,8,176,6],[162,14,176,12,"user"],[162,18,176,22],[162,21,176,25],[163,10,177,8,"id"],[163,12,177,10],[163,14,177,12,"userData"],[163,22,177,20],[163,23,177,21,"id"],[163,25,177,23],[164,10,178,8,"email"],[164,15,178,13],[164,17,178,15,"userData"],[164,25,178,23],[164,26,178,24,"email"],[164,31,178,29],[165,10,179,8,"subscription_tier"],[165,27,179,25],[165,29,179,27,"userData"],[165,37,179,35],[165,38,179,36,"subscription_tier"],[165,55,179,53],[166,10,180,8,"subscription_expires_at"],[166,33,180,31],[166,35,180,33,"userData"],[166,43,180,41],[166,44,180,42,"subscription_expires_at"],[167,8,181,6],[167,9,181,7],[168,8,183,6,"set"],[168,11,183,9],[168,12,183,10],[169,10,183,12,"user"],[170,8,183,17],[170,9,183,18],[170,10,183,19],[171,6,184,4],[171,7,184,5],[171,8,184,6],[171,15,184,13,"error"],[171,20,184,18],[171,22,184,20],[172,8,185,6,"console"],[172,15,185,13],[172,16,185,14,"error"],[172,21,185,19],[172,22,185,20],[172,50,185,48],[172,52,185,50,"error"],[172,57,185,55],[172,58,185,56],[173,6,186,4],[174,4,187,2],[175,2,188,0],[175,3,188,1],[175,4,188,2],[175,5,188,3],[176,0,188,4],[176,3]],"functionMap":{"names":["<global>","create$argument_0","register","login","logout","loadUser","refreshProfile"],"mappings":"AAA;8CCyB;YCM;GDoC;SEE;GFoC;UGE;GHc;YIE;GJ0C;kBKE;GLmB;EDC"}},"type":"js/module"}]}